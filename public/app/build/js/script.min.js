angular.module("gpp",["ui.router","ngMaterial","angular-loading-bar","restangular","ngMdIcons","toastr","ngAnimate","angular.filter","md.data.table","LocalStorageModule","mainModule","homeModule","dashboardModule","loginModule","usersModule","termModule","lawareaModule","app.userService","app.termService","app.lawareaService"]).constant("myConfig",{BASE_API:window.location.origin+"/"}).run(["$rootScope","$state","$location","$stateParams","userService",function(e,t,n,a,o){e.previousState="",e.currentState="",e.isAuthenticated=o.checkIfLoggedIn(),e.$state=t,e.$stateParams=a,e.$on("$stateChangeSuccess",function(t,n,a,o,r){e.previousState=o.name,e.currentState=n.name,e.returnToStateParams=r.id,e.hasHeader=n.hasHeader,e.hasSidebar=n.hasSidebar,e.hasFooter=n.hasFooter,e.title=n.title}),e.$on("$routeChangeError",function(e,t,n,a){})}]).config(["cfpLoadingBarProvider","$stateProvider","$urlMatcherFactoryProvider","$urlRouterProvider","RestangularProvider","toastrConfig","$locationProvider","myConfig",function(e,t,n,a,o,r,i,s){angular.extend(r,{autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"}),e.includeSpinner=!1,n.caseInsensitive(!0),o.setBaseUrl(s.BASE_API+"/api"),o.addResponseInterceptor(function(e,t){return"getList"===t?e.data:e}),i.hashPrefix(""),a.otherwise("/"),t.state({name:"main",abstract:!0,views:{main_view:{templateUrl:"app/src/components/main/views/main.html",controller:"mainCtrl"}}}).state({name:"main.home",title:"Home",url:"/",templateUrl:"app/src/components/home/views/home.html",hasHeader:!0,hasSidebar:!1,hasFooter:!0,controller:"homeCtrl"}).state({name:"main.dashboard",title:"Dashboard",url:"/dashboard",templateUrl:"app/src/components/dashboard/views/dashboard.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,controller:"dashboardCtrl",resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]}}).state({name:"main.login",title:"Login",url:"/login",templateUrl:"app/src/components/login/views/login.html",hasHeader:!1,hasFooter:!1,hasSidebar:!1,controller:"loginCtrl"}).state({name:"main.terms",title:"Manage Terms",url:"/manage/terms",templateUrl:"app/src/components/terms/views/manageTerms.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"termsCtrl"}).state({name:"main.newTerm",title:"New Term",url:"/manage/terms/add-new",templateUrl:"app/src/components/terms/views/addTerm.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"termsCtrl"}).state({name:"main.editTerm",title:"Edit Term",url:"/manage/term/:id/edit",templateUrl:"app/src/components/terms/views/addTerm.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"termsCtrl"}).state({name:"main.lawareas",title:"Manage lawareas",url:"/manage/lawareas",templateUrl:"app/src/components/lawareas/views/manageLawareas.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"lawareasCtrl"}).state({name:"main.newLawarea",title:"New Lawarea",url:"/manage/lawareas/add-lawarea",templateUrl:"app/src/components/lawareas/views/addLawarea.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"lawareasCtrl"}).state({name:"main.editLawarea",title:"Edit Lawarea",url:"/manage/lawarea/:id/edit",templateUrl:"app/src/components/lawareas/views/addLawarea.html",hasHeader:!0,hasFooter:!0,hasSidebar:!0,resolve:{authenticated:["$rootScope","$location",function(e,t){if(!e.isAuthenticated)return t.path("/login")}]},controller:"lawareasCtrl"}).state({name:"main.404",title:"404",url:"/404",templateUrl:"build/views/404.html"})}]),function(){function e(e,t,n,a,o,r){e.lockedLeft=!0,e.toggleLeft=function(){e.lockedLeft=!e.lockedLeft},e.logout=function(){r.logout(),n.isAuthenticated=null,t.go("main.login")},e.refresh=function(){},e.posts=[],e.currentToken="",e.menu=[{link:"main.dashboard",title:"Dashboard",icon:"dashboard"},{link:"main.terms",title:"Terms",icon:"person"},{link:"main.lawareas",title:"Law Areas",icon:"person"},{link:"main.constitutionals",title:"Constitutionals",icon:"person"},{link:"main.interprovisions",title:"International Provisions",icon:"person"},{link:"main.caselaws",title:"Case Laws",icon:"person"},{link:"main.books",title:"Books",icon:"person"},{link:"main.blogs",title:"Blogs",icon:"person"},{link:"main.country",title:"Countries",icon:"person"},{link:"main.Interarticles",title:"International Articles",icon:"person"},{link:"main.statutes",title:"Statutes",icon:"person"}]}e.$inject=["$scope","$state","$rootScope","$mdSidenav","$mdComponentRegistry","userService"],angular.module("mainModule",[]).controller("mainCtrl",e)}(),function(){function e(e,t,n){e.doSearch=function(e){t.searchForTerm(e,function(e){},function(e){})}}angular.module("homeModule",[]).controller("homeCtrl",e)}(),function(){function e(e,t,n,a,o){e.loginData={},e.doLogin=function(){n.login(e.loginData.email,e.loginData.password,function(e){o.isAuthenticated=!0,t.go("main.dashboard")},function(t){e.error=t.data})},n.checkIfLoggedIn()}e.$inject=["$scope","$state","userService","$mdToast","$rootScope"],angular.module("loginModule",[]).controller("loginCtrl",e)}(),angular.module("usersModule",[]).controller("usersCtrl",[]),function(){function e(e){}angular.module("dashboardModule",[]).controller("dashboardCtrl",e)}(),function(){function e(e,t,n,a,o){switch(e.term={},e.term.descriptions=[],a.currentState){case"main.editTerm":t.getById(o.id,function(t){e.term.title=t.data.title,e.term.description=[],angular.forEach(t.data.definitions.data,function(t,n){e.term.descriptions.push(t),e.term.description.push(t.definition)})})}t.getAll(function(t){e.terms=t},function(e){}),e.doSearch=function(e){t.searchForTerm(e,function(e){},function(e){})},e.addDescription=function(){e.term.descriptions.push({})},e.removeDescription=function(t){var n=e.term.descriptions.indexOf(t);n>-1&&(e.term.descriptions.splice(n,1),e.term.description.splice(n,1))},e.submit=function(){switch(a.currentState){case"main.newTerm":t.create(e.term,function(){n.show(n.simple().textContent(e.term.title+" successfully added").position("bottom right").hideDelay(3e3)),e.term={}},function(t){e.errors=t.data.errors});break;case"main.editTerm":t.update(o.id,e.term,function(){n.show(n.simple().textContent(e.term.title+" successfully Updated").position("bottom right").hideDelay(3e3))},function(t){e.errors=t.data.errors})}},e.deleteTerm=function(a){t.remove(a.secureId,function(t){n.show(n.simple().textContent(e.term.title+" successfully deleted").position("bottom right").hideDelay(3e3))});var o=e.terms.indexOf(a);o>-1&&e.terms.splice(o,1)}}angular.module("termModule",[]).controller("termsCtrl",e)}(),function(){function e(e,t,n,a,o){switch(e.lawarea={},a.currentState){case"main.editLawarea":t.getById(o.id,function(t){e.lawarea=t.data})}t.getAll(function(t){e.lawareas=t},function(e){}),e.submit=function(){switch(a.currentState){case"main.newLawarea":t.create(e.lawarea,function(){n.show(n.simple().textContent(e.lawarea.title+" successfully added").position("bottom right").hideDelay(3e3)),e.lawarea={}},function(t){e.errors=t.data.errors});break;case"main.editLawarea":t.update(o.id,e.lawarea,function(){n.show(n.simple().textContent(e.lawarea.title+" successfully Updated").position("bottom right").hideDelay(3e3))},function(t){e.errors=t.data.errors})}},e.deleteLawarea=function(a){t.remove(a.secureId,function(t){n.show(n.simple().textContent(e.lawarea.title+" successfully deleted").position("bottom right").hideDelay(3e3))});var o=e.lawareas.indexOf(a);o>-1&&e.lawareas.splice(o,1)}}angular.module("lawareaModule",[]).controller("lawareasCtrl",e)}(),angular.module("app.userService",[]).factory("userService",["localStorageService","$rootScope","Restangular",function(e,t,n){function a(){return e.get("token")}function o(t,n,a,o,r){$http.post("/api/auth/signup",{name:t,email:n,password:a}).then(function(t){e.set("token",t.data.token),o(t)},function(e){r(e)})}function r(t,a,o,r){n.all("authenticate").post({email:t,password:a}).then(function(t){e.set("token",t.token),o(t)},function(e){r(e)})}function i(){e.remove("token")}function s(){return e.get("token")}function l(e,t){n.one("authenticated_user").get().then(function(t){e(t.user)},function(e){t(e)})}function c(e,t){n.all("users").getList().then(function(t){e(t)},function(){t(response)})}function u(e,t,a){n.one("users",e).get().then(function(e){t(e)},function(e){a(e)})}function d(e,t,a){n.all("users").post(e).then(function(e){t(e)},function(e){a(e)})}function m(e,t,a,o){n.one("users").customPUT(t,e).then(function(e){a(e)},function(e){o(e)})}function f(e,t,a){n.one("users/",e).remove().then(function(){t()},function(e){a(e)})}return n.setDefaultHeaders({Authorization:"Bearer "+s()}),{checkIfLoggedIn:a,signup:o,login:r,logout:i,getCurrentToken:s,getAuthenticatedUser:l,getAll:c,getById:u,create:d,update:m,remove:f}}]),function(){function e(e,t){function n(t,n){e.all("terms").getList().then(function(e){t(e)},function(e){n(e)})}function a(t,n,a){e.one("terms",t).get().then(function(e){n(e)},function(e){a(e)})}function o(t,n,a){e.all("terms").post(t).then(function(e){n(e)},function(e){a(e)})}function r(t,n,a,o){e.one("terms").customPUT(n,t).then(function(e){a(e)},function(e){o(e)})}function i(t,n,a){e.one("terms/",t).remove().then(function(){n()},function(e){a(e)})}function s(t,n,a){e.oneUrl("terms/search/"+t).get().then(function(e){n(e)},function(e){a(e)})}return e.setDefaultRequestParams({token:t.getCurrentToken()}),{getAll:n,getById:a,searchForTerm:s,create:o,update:r,remove:i}}angular.module("app.termService",[]).factory("termService",e)}(),function(){function e(e,t){function n(t,n){e.all("lawareas").getList().then(function(e){t(e)},function(e){n(e)})}function a(t,n,a){e.one("lawareas",t).get().then(function(e){n(e)},function(e){a(e)})}function o(t,n,a){e.all("lawareas").post(t).then(function(e){n(e)},function(e){a(e)})}function r(t,n,a,o){e.one("lawareas").customPUT(n,t).then(function(e){a(e)},function(e){o(e)})}function i(t,n,a){e.one("lawareas/",t).remove().then(function(){n()},function(e){a(e)})}function s(t,n,a){e.oneUrl("lawareas/search/"+t).get().then(function(e){n(e)},function(e){a(e)})}return e.setDefaultRequestParams({token:t.getCurrentToken()}),{getAll:n,getById:a,searchForTerm:s,create:o,update:r,remove:i}}angular.module("app.lawareaService",[]).factory("lawareaService",e)}();